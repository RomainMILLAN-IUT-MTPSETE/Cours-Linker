(this.webpackJsonp=this.webpackJsonp||[]).push([[64],{SEfe:function(e,t,n){"use strict";var o=n("RlQ7"),s=n.n(o),r=n("c0r3"),d=n.n(r);const l=e=>e.every(e=>d()(e,"id"));var i=n("W+tr"),u=n("cuRJ"),a=n("6IRw"),c=n.n(a);const p={name:"GlTokenContainer",components:{GlToken:i.a,GlButton:u.a},props:{tokens:{type:Array,validator:l,required:!0},state:{type:Boolean,required:!1,default:null},registerFocusOnToken:{type:Function,required:!0},viewOnly:{type:Boolean,required:!1,default:!1},showClearAllButton:{type:Boolean,required:!1,default:!1}},data:()=>({bindFocusEvent:!0,focusedTokenIndex:null}),computed:{focusedToken(){return this.tokens[this.focusedTokenIndex]||null}},watch:{focusedToken(e){var t;if(null===e)return;const n=null===(t=this.$refs.tokens)||void 0===t?void 0:t.find(t=>t.dataset.tokenId===e.id.toString());n&&(this.bindFocusEvent=!1,n.focus(),this.bindFocusEvent=!0)}},created(){this.registerFocusOnToken(this.focusOnToken)},methods:{handleClose(e){this.$emit("token-remove",e),this.focusedTokenIndex=null},handleLeftArrow(){0===this.focusedTokenIndex?this.focusLastToken():this.focusPrevToken()},handleRightArrow(){this.focusedTokenIndex===this.tokens.length-1?this.focusFirstToken():this.focusNextToken()},handleHome(){this.focusFirstToken()},handleEnd(){this.focusLastToken()},handleDelete(){this.$emit("token-remove",this.focusedToken),this.focusedTokenIndex>0&&this.focusPrevToken()},handleEscape(){this.focusedTokenIndex=null,this.$emit("cancel-focus")},handleTab(){this.$emit("cancel-focus")},handleTokenFocus(e){this.focusedTokenIndex=e},focusLastToken(){this.focusedTokenIndex=this.tokens.length-1},focusFirstToken(){this.focusedTokenIndex=0},focusNextToken(){this.focusedTokenIndex+=1},focusPrevToken(){this.focusedTokenIndex-=1},focusOnToken(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.focusedTokenIndex=e}}};var h=c()({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"gl-display-flex gl-flex-nowrap gl-align-items-flex-start gl-w-full"},[n("div",{ref:"tokenContainer",staticClass:"gl-display-flex gl-flex-wrap gl-align-items-center gl-my-n1 gl-mx-n1 gl-w-full",attrs:{role:"listbox","aria-multiselectable":"false","aria-orientation":"horizontal","aria-invalid":!1===e.state&&"true"},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.handleLeftArrow.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"right",39,t.key,["Right","ArrowRight"])||"button"in t&&2!==t.button?null:e.handleRightArrow.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"home",void 0,t.key,void 0)?null:e.handleHome.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"end",void 0,t.key,void 0)?null:e.handleEnd.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.handleDelete.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.handleEscape.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:(t.preventDefault(),e.handleTab.apply(null,arguments))}]}},[e._l(e.tokens,(function(t,o){return n("div",{key:t.id,ref:"tokens",refInFor:!0,staticClass:"gl-token-selector-token-container gl-px-1 gl-py-2 gl-outline-none",attrs:{"data-token-id":t.id,role:"option",tabindex:"-1"},on:{focus:function(t){e.bindFocusEvent&&e.handleTokenFocus(o)}}},[n("gl-token",{staticClass:"gl-cursor-default",class:t.class,style:t.style,attrs:{"view-only":e.viewOnly},on:{close:function(n){return e.handleClose(t)}}},[e._t("token-content",(function(){return[n("span",[e._v("\n            "+e._s(t.name)+"\n          ")])]}),{token:t})],2)],1)})),e._v(" "),e._t("text-input")],2),e._v(" "),e.showClearAllButton?n("div",{staticClass:"gl-ml-3 gl-p-1"},[n("gl-button",{attrs:{size:"small","aria-label":"Clear all",icon:"clear",category:"tertiary","data-testid":"clear-all-button"},on:{click:function(t){return t.stopPropagation(),e.$emit("clear-all")}}})],1):e._e()])},staticRenderFns:[]},void 0,p,void 0,!1,void 0,!1,void 0,void 0,void 0);const f={name:"GlTokenSelectorDropdown",components:{GlDropdownItem:n("0X+3").a},props:{show:{type:Boolean,required:!0},menuClass:{type:[String,Array,Object],required:!1,default:""},loading:{type:Boolean,required:!1,default:!1},dropdownItems:{type:Array,validator:l,required:!0},inputText:{type:String,required:!0},allowUserDefinedTokens:{type:Boolean,required:!0},componentId:{type:String,required:!0},registerDropdownEventHandlers:{type:Function,required:!0},registerResetFocusedDropdownItem:{type:Function,required:!0}},data:()=>({focusedDropdownItemIndex:0}),computed:{focusedDropdownItem(){return this.dropdownItems[this.focusedDropdownItemIndex]}},watch:{focusedDropdownItem(e,t){if((null==e?void 0:e.id)!==(null==t?void 0:t.id)){if(this.$emit("input",e),!e)return;const t=this.getDropdownItemRef(e);null!=t&&t.$el&&t.$el.scrollIntoView({block:"nearest",inline:"end"})}}},created(){this.registerDropdownEventHandlers({handleUpArrow:this.handleUpArrow,handleDownArrow:this.handleDownArrow,handleHomeKey:this.handleHomeKey,handleEndKey:this.handleEndKey}),this.registerResetFocusedDropdownItem(this.resetFocusedDropdownItem),this.$emit("input",this.focusedDropdownItem)},methods:{handleDropdownItemClick(e){this.$emit("dropdown-item-click",e)},handleMousedown(e){const t=null===e?this.$refs.userDefinedTokenDropdownItem:this.getDropdownItemRef(e);null!=t&&t.$el&&t.$el.querySelector("button").focus()},handleUpArrow(){this.show&&0!==this.focusedDropdownItemIndex&&this.focusPrevDropdownItem()},handleDownArrow(){this.show?this.focusedDropdownItemIndex!==this.dropdownItems.length-1&&this.focusNextDropdownItem():this.$emit("show")},handleHomeKey(e){e.preventDefault(),this.focusFirstDropdownItem()},handleEndKey(e){e.preventDefault(),this.focusLastDropdownItem()},focusLastDropdownItem(){this.focusedDropdownItemIndex=this.dropdownItems.length-1},focusFirstDropdownItem(){this.focusedDropdownItemIndex=0},focusNextDropdownItem(){this.focusedDropdownItemIndex+=1},focusPrevDropdownItem(){this.focusedDropdownItemIndex-=1},resetFocusedDropdownItem(){this.focusedDropdownItemIndex=0},dropdownItemIsFocused(e){return!!this.focusedDropdownItem&&e.id===this.focusedDropdownItem.id},getDropdownItemRef(e){var t;return null===(t=this.$refs.dropdownItems)||void 0===t?void 0:t.find(t=>t.$attrs["data-dropdown-item-id"]===e.id)},dropdownItemIdAttribute(e){return e?`${this.componentId}-dropdown-item-${e.id}`:null}}};var k=c()({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dropdown b-dropdown gl-dropdown gl-relative",class:{show:e.show}},[n("ul",{ref:"dropdownMenu",staticClass:"dropdown-menu gl-absolute",class:[{show:e.show},e.menuClass],attrs:{role:"menu","aria-activedescendant":e.dropdownItemIdAttribute(e.focusedDropdownItem)}},[e.loading?n("gl-dropdown-item",{attrs:{disabled:""}},[e._t("loading-content",(function(){return[e._v("Searching...")]}))],2):e.dropdownItems.length?e._l(e.dropdownItems,(function(t){return n("gl-dropdown-item",{key:t.id,ref:"dropdownItems",refInFor:!0,attrs:{id:e.dropdownItemIdAttribute(t),"data-dropdown-item-id":t.id,active:e.dropdownItemIsFocused(t),"active-class":"is-focused",tabindex:"-1"},on:{click:function(n){return e.handleDropdownItemClick(t)}}},[n("div",{staticClass:"gl-mx-n4 gl-my-n3 gl-px-4 gl-py-3",on:{mousedown:function(n){return e.handleMousedown(t)}}},[e._t("dropdown-item-content",(function(){return[e._v("\n            "+e._s(t.name)+"\n          ")]}),{dropdownItem:t})],2)])})):[e.allowUserDefinedTokens&&""!==e.inputText?n("gl-dropdown-item",{ref:"userDefinedTokenDropdownItem",attrs:{active:"","active-class":"is-focused"},on:{click:function(t){return e.handleDropdownItemClick(null)}}},[n("div",{staticClass:"gl-mx-n4 gl-my-n3 gl-px-4 gl-py-3",on:{mousedown:function(t){return e.handleMousedown(null)}}},[e._t("user-defined-token-content",(function(){return[e._v('\n            Add "'+e._s(e.inputText)+'"\n          ')]}),{inputText:e.inputText})],2)]):n("gl-dropdown-item",{attrs:{disabled:""}},[e._t("no-results-content",(function(){return[e._v("No matches found")]}))],2)],e._v(" "),e._t("dropdown-footer")],2)])},staticRenderFns:[]},void 0,f,void 0,!1,void 0,!1,void 0,void 0,void 0);const w={name:"GlTokenSelector",componentId:s()("token-selector"),components:{GlTokenContainer:h,GlTokenSelectorDropdown:k},model:{prop:"selectedTokens",event:"input"},props:{dropdownItems:{type:Array,validator:l,required:!1,default:()=>[]},allowUserDefinedTokens:{type:Boolean,required:!1,default:!1},loading:{type:Boolean,required:!1,default:!1},hideDropdownWithNoItems:{type:Boolean,required:!1,default:!1},containerClass:{type:String,required:!1,default:""},menuClass:{type:[String,Array,Object],required:!1,default:""},autocomplete:{type:String,required:!1,default:"off"},ariaLabelledby:{type:String,required:!1,default:null},placeholder:{type:String,required:!1,default:null},textInputAttrs:{type:Object,required:!1,default:null},state:{type:Boolean,required:!1,default:null},selectedTokens:{type:Array,validator:l,required:!0},viewOnly:{type:Boolean,required:!1,default:!1},allowClearAll:{type:Boolean,required:!1,default:!1}},data:()=>({inputText:"",inputFocused:!1,dropdownIsOpen:!1,focusedDropdownItem:null,triggerTokenFocusNextBackspace:!0,rootElClasses:"",dropdownEventHandlers:{handleUpArrow:()=>{},handleDownArrow:()=>{},handleHomeKey:()=>{},handleEndKey:()=>{}},resetFocusedDropdownItem:()=>{},focusOnToken:()=>{}}),computed:{filteredDropdownItems(){return this.dropdownItems.filter(e=>-1===this.selectedTokens.findIndex(t=>t.id===e.id))},dropdownHasNoItems(){return!this.filteredDropdownItems.length},userDefinedTokenCanBeAdded(){return this.allowUserDefinedTokens&&this.dropdownHasNoItems&&""!==this.inputText},hideDropdown(){return!this.userDefinedTokenCanBeAdded&&!(!this.hideDropdownWithNoItems||!this.dropdownHasNoItems)},stateClass(){return null===this.state?"gl-inset-border-1-gray-400!":this.state?"is-valid gl-inset-border-1-gray-400!":"is-invalid gl-inset-border-1-red-500!"},hasSelectedTokens(){return this.selectedTokens.length>0},showEmptyPlaceholder(){return!this.hasSelectedTokens&&!this.inputFocused},showClearAllButton(){return this.hasSelectedTokens&&this.allowClearAll}},watch:{inputText(e,t){e!==t&&(this.$emit("text-input",e),this.resetFocusedDropdownItem(),this.triggerTokenFocusNextBackspace=""===e,this.$nextTick(()=>{this.hideDropdown?this.closeDropdown():""!==e&&this.openDropdown()}))}},methods:{handleFocus(e){this.$emit("focus",e),this.openDropdown(),this.inputFocused=!0,this.focusOnToken(),""===this.inputText&&(this.triggerTokenFocusNextBackspace=!0)},handleBlur(e){this.$emit("blur",e),this.inputFocused=!1,this.$nextTick(()=>{var t,n;null!==(t=e.relatedTarget)&&void 0!==t&&null!==(n=t.closest)&&void 0!==n&&n.call(t,".dropdown-item")||this.closeDropdown()})},handleEnter(){this.userDefinedTokenCanBeAdded?this.addToken():this.focusedDropdownItem&&this.dropdownIsOpen&&this.addToken(this.focusedDropdownItem)},handleEscape(){this.inputText="",this.closeDropdown()},handleBackspace(e){""===this.inputText&&this.selectedTokens.length&&(e.preventDefault(),this.triggerTokenFocusNextBackspace?(this.$refs.textInput.blur(),this.focusOnToken(this.selectedTokens.length-1)):this.triggerTokenFocusNextBackspace=!0)},handleInputClick(){this.inputFocused&&""===this.inputText&&!this.dropdownIsOpen&&this.openDropdown()},handleContainerClick(e){const{target:t}=e;null!==(null==t?void 0:t.closest(".gl-token"))||this.inputFocused||this.focusTextInput()},addToken(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=null!==e?e:{id:s()("user-defined-token"),name:this.inputText};this.$emit("input",[...this.selectedTokens,t]),this.inputText="",this.closeDropdown(),this.$emit("token-add",t)},removeToken(e){this.$emit("input",this.selectedTokens.filter(t=>t.id!==e.id)),this.$emit("token-remove",e)},cancelTokenFocus(){this.focusTextInput()},closeDropdown(){this.dropdownIsOpen=!1,this.resetFocusedDropdownItem()},openDropdown(){this.hideDropdown||(this.dropdownIsOpen=!0)},focusTextInput(){this.$refs.textInput.focus()},registerDropdownEventHandlers(e){this.dropdownEventHandlers=e},registerResetFocusedDropdownItem(e){this.resetFocusedDropdownItem=e},registerFocusOnToken(e){this.focusOnToken=e},clearAll(){this.$emit("input",[]),this.focusTextInput()}}};const m=c()({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{ref:"container",staticClass:"gl-token-selector gl-form-input gl-display-flex gl-align-items-center form-control form-control-plaintext gl-cursor-text! gl-py-2! gl-px-3!",class:[e.inputFocused?"gl-token-selector-focus-glow":"",e.containerClass,e.stateClass],on:{click:e.handleContainerClick}},[e.showEmptyPlaceholder?e._t("empty-placeholder"):e._e(),e._v(" "),n("gl-token-container",{attrs:{tokens:e.selectedTokens,state:e.state,"register-focus-on-token":e.registerFocusOnToken,"view-only":e.viewOnly,"show-clear-all-button":e.showClearAllButton},on:{"token-remove":e.removeToken,"cancel-focus":e.cancelTokenFocus,"clear-all":e.clearAll},scopedSlots:e._u([{key:"token-content",fn:function(t){var n=t.token;return[e._t("token-content",null,{token:n})]}},{key:"text-input",fn:function(){return[n("input",e._b({ref:"textInput",staticClass:"gl-token-selector-input gl-bg-none gl-font-regular gl-font-base gl-line-height-normal gl-px-1 gl-h-auto gl-text-gray-900 gl-border-none gl-outline-none gl-flex-grow-1 gl-w-40p",attrs:{type:"text",autocomplete:e.autocomplete,"aria-labelledby":e.ariaLabelledby,placeholder:e.placeholder,disabled:e.viewOnly},domProps:{value:e.inputText},on:{input:function(t){e.inputText=t.target.value},focus:e.handleFocus,blur:e.handleBlur,keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleEnter.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.handleEscape.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.handleBackspace.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.dropdownEventHandlers.handleUpArrow.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.dropdownEventHandlers.handleDownArrow.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"home",void 0,t.key,void 0)?null:e.dropdownEventHandlers.handleHomeKey.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"end",void 0,t.key,void 0)?null:e.dropdownEventHandlers.handleEndKey.apply(null,arguments)},function(t){return t.stopPropagation(),e.$emit("keydown",t)}],click:e.handleInputClick}},"input",e.textInputAttrs,!1))]},proxy:!0}],null,!0)})],2),e._v(" "),n("gl-token-selector-dropdown",{attrs:{"menu-class":e.menuClass,show:e.dropdownIsOpen,loading:e.loading,"dropdown-items":e.filteredDropdownItems,"selected-tokens":e.selectedTokens,"input-text":e.inputText,"allow-user-defined-tokens":e.allowUserDefinedTokens,"component-id":e.$options.componentId,"register-dropdown-event-handlers":e.registerDropdownEventHandlers,"register-reset-focused-dropdown-item":e.registerResetFocusedDropdownItem},on:{"dropdown-item-click":e.addToken,show:e.openDropdown},scopedSlots:e._u([{key:"loading-content",fn:function(){return[e._t("loading-content")]},proxy:!0},{key:"user-defined-token-content",fn:function(){return[e._t("user-defined-token-content",null,{inputText:e.inputText})]},proxy:!0},{key:"no-results-content",fn:function(){return[e._t("no-results-content")]},proxy:!0},{key:"dropdown-item-content",fn:function(t){var n=t.dropdownItem;return[e._t("dropdown-item-content",null,{dropdownItem:n})]}},{key:"dropdown-footer",fn:function(){return[e._t("dropdown-footer")]},proxy:!0}],null,!0),model:{value:e.focusedDropdownItem,callback:function(t){e.focusedDropdownItem=t},expression:"focusedDropdownItem"}})],1)},staticRenderFns:[]},void 0,w,void 0,!1,void 0,!1,void 0,void 0,void 0);t.a=m},"W+tr":function(e,t,n){"use strict";var o=n("Fcvx"),s=n("Uklg"),r=n("6IRw"),d=n.n(r);const l={name:"GlToken",components:{CloseButton:s.a},props:{viewOnly:{type:Boolean,required:!1,default:!1},variant:{type:String,required:!1,default:"default",validator:e=>o.I.includes(e)}},computed:{variantClass(){return`gl-token-${this.variant}-variant`},viewOnlyClass(){return{"gl-token-view-only":this.viewOnly}}},methods:{close(e){this.$emit("close",e)}}};const i=d()({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",e._g({class:["gl-token",e.variantClass,e.viewOnlyClass]},e.$listeners),[n("span",{staticClass:"gl-token-content"},[e._t("default"),e._v(" "),e.viewOnly?e._e():n("close-button",{staticClass:"gl-token-close gl-close-btn-color-inherit",on:{click:e.close}})],2)])},staticRenderFns:[]},void 0,l,void 0,!1,void 0,!1,void 0,void 0,void 0);t.a=i}}]);
//# sourceMappingURL=commons-pages.admin.application_settings.reporting-pages.groups.edit-pages.groups.settings.reporting-89039b54.c21ed0c2.chunk.js.map